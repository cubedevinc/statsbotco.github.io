(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{386:function(e,t,a){e.exports=a.p+"static/media/schema.9d089d08.png"},390:function(e,t,a){e.exports=a(786)},783:function(e,t,a){},786:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(35),i=a.n(l),o=a(795),c=a(793),s=a(348),u=a.n(s),m=a(389),d=a(794),p=a(44),E=a(45),v=a(54),h=a(52),g=a(55),f=a(101),y=a(28),b=a(5),w=a.n(b),S=a(349),C=a.n(S),O=a(29),N=a(354),R=a.n(N),j=a(358),T=a.n(j),I=a(355),k=a.n(I),x=a(356),D=a.n(x),A=a(228),M=a.n(A),_=a(34),q=a.n(_),G=a(360),F=a.n(G),V=a(122),B=a.n(V),L=a(357),z=a.n(L),U=a(359),P=a.n(U),Y=a(791),H=a(103),J=a.n(H),W=a(128),K=a.n(W),Q=a(129),X=a.n(Q),Z=a(351),$=a.n(Z),ee=a(161),te=a.n(ee),ae=a(352),ne=a.n(ae),re=a(353),le=a.n(re),ie=Object(O.withStyles)(function(e){return{link:{textDecoration:"none"}}})(function(e){var t=e.classes;return r.a.createElement("div",null,r.a.createElement(Y.a,{to:"/",className:t.link},r.a.createElement(J.a,{button:!0},r.a.createElement(K.a,null,r.a.createElement($.a,null)),r.a.createElement(X.a,{primary:"Dashboard"}))),r.a.createElement(Y.a,{to:"/reports",className:t.link},r.a.createElement(J.a,{button:!0},r.a.createElement(K.a,null,r.a.createElement(te.a,null)),r.a.createElement(X.a,{primary:"Reports"}))),r.a.createElement(Y.a,{to:"/funnels",className:t.link},r.a.createElement(J.a,{button:!0},r.a.createElement(K.a,null,r.a.createElement(ne.a,null)),r.a.createElement(X.a,{primary:"Funnels"}))),r.a.createElement(Y.a,{to:"/about",className:t.link},r.a.createElement(J.a,{button:!0},r.a.createElement(K.a,null,r.a.createElement(le.a,null)),r.a.createElement(X.a,{primary:"About"}))))}),oe=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(v.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleDrawerOpen=function(){window.snowplow("trackStructEvent","Navigation","Menu Opened"),a.setState({open:!0})},a.handleDrawerClose=function(){window.snowplow("trackStructEvent","Navigation","Menu Closed"),a.setState({open:!1})},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.title,n=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:t.root},r.a.createElement(R.a,null),r.a.createElement(k.a,{position:"absolute",className:w()(t.appBar,this.state.open&&t.appBarShift)},r.a.createElement(D.a,{disableGutters:!this.state.open,className:t.toolbar},r.a.createElement(B.a,{color:"inherit","aria-label":"Open drawer",onClick:this.handleDrawerOpen,className:w()(t.menuButton,this.state.open&&t.menuButtonHidden)},r.a.createElement(z.a,null)),r.a.createElement(q.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},a))),r.a.createElement(T.a,{variant:"permanent",classes:{paper:w()(t.drawerPaper,!this.state.open&&t.drawerPaperClose)},open:this.state.open},r.a.createElement("div",{className:t.toolbarIcon},r.a.createElement(B.a,{onClick:this.handleDrawerClose},r.a.createElement(P.a,null))),r.a.createElement(F.a,null),r.a.createElement(M.a,null,r.a.createElement(ie,null))),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),n)),r.a.createElement(C.a,{svgStyle:{zIndex:1202},size:120,href:"https://github.com/statsbotco/cubejs-client/tree/master/examples/event-analytics"}))}}]),t}(r.a.Component);oe.defaultProps={title:null};var ce=Object(O.withStyles)(function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(y.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(f.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:7*e.spacing.unit},e.breakpoints.up("sm"),{width:9*e.spacing.unit}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,padding:3*e.spacing.unit,height:"100vh",overflow:"auto"},h5:{marginBottom:2*e.spacing.unit}}})(oe),se=function(e){var t=e.title,a=Object(m.a)(e,["title"]);return r.a.createElement(ce,{title:t},r.a.createElement(d.a,a))},ue=a(67),me=a.n(ue),de=a(68),pe=a.n(de),Ee=a(76),ve=a.n(Ee),he=a(373),ge=a.n(he),fe=a(20),ye=a.n(fe),be=a(374),we=a.n(be),Se=a(163),Ce=a.n(Se),Oe=a(164),Ne=a(363),Re=a.n(Ne),je=a(364),Te=a.n(je),Ie=a(238),ke=a.n(Ie),xe=a(240),De=a.n(xe),Ae=a(241),Me=a.n(Ae),_e=a(367),qe=a.n(_e),Ge=a(232),Fe=a.n(Ge),Ve=a(159),Be=a.n(Ve),Le=a(39),ze=a.n(Le),Ue=a(362),Pe=a.n(Ue),Ye={"time:null":function(e){return ze()(e).format("MMM DD")},"time:month":function(e){return ze()(e).format("MMM DD")},"time:week":function(e){return ze()(e).format("MMM DD")},"time:day":function(e){return ze()(e).format("MMM DD")},"time:hour":function(e){return ze()(e).format("MMM DD, HH:mm")},number:function(e){return Pe()(e).format("0,0")},undefined:function(e){return e},string:function(e){return e}},He=function(e,t,a){return t.map(function(t){return t[e]=Ye[a](t[e]),t})},Je=function(e){return"time:".concat(e.query().timeDimensions[0].granularity)},We=function(e){return Object.keys(e.chartPivot()[0]).filter(function(e){return!["category","x"].includes(e)})},Ke=function(e,t){var a=e.loadResponse.annotation.measures[t]||e.loadResponse.annotation.dimensions[t];return a&&a.shortTitle?a.shortTitle:1===e.query().measures.length&&t.split(",").length>1?t.split(",")[0]:t},Qe=["#7DB3FF","#49457B","#FF7C78","#FED3D0","#6F76D9","#9ADFB4","#2E7987"],Xe=a(368),Ze=a.n(Xe),$e=a(370),et=a.n($e),tt=a(105),at=a.n(tt),nt=a(369),rt=a.n(nt),lt=a(244),it=a.n(lt),ot=a(98),ct=a.n(ot);var st=Object(O.withStyles)({root:{width:"100%",overflowX:"auto"}})(function(e){var t=e.classes,a=e.resultSet;return r.a.createElement(ct.a,{className:t.root},r.a.createElement(Ze.a,{className:t.table},r.a.createElement(rt.a,null,r.a.createElement(it.a,null,r.a.createElement(at.a,null,"Event"),r.a.createElement(at.a,{align:"right"},"Count"),r.a.createElement(at.a,{align:"right"},"Uniq Count"))),r.a.createElement(et.a,null,a.pivot().map(function(e,t){return r.a.createElement(it.a,{key:t},e.xValues.map(function(e,t){return r.a.createElement(at.a,{key:t,component:"th"}," ",e," ")}),e.yValuesArray.map(function(e,t){return r.a.createElement(at.a,{key:t,align:"right"},e[1])}))}))))}),ut=a(792),mt=a(739),dt=a(242),pt=a(243),Et=a(787),vt=a(788),ht=function(e){var t=e.children;return r.a.createElement(vt.a,{width:"99%",height:320},t)},gt=function(e){return e.query().dimensions[0]},ft=function(e){return e.query().dimensions.length>0},yt=function(e){return ft(e)?e.chartPivot({x:[gt(e)],y:["measures"],fillMissingDates:!1}):e.chartPivot({x:["measures"],y:[]})},bt=function(e,t){if(ft(e))return e.loadResponse.annotation.dimensions[t].type},wt=function(e){return ft(e)?Object.keys(e.loadResponse.annotation.measures)[0]:""},St=a(789),Ct=a(790),Ot=a(741),Nt=a(742),Rt=a(740),jt=function(e){var t=e.loadResponse.query,a=e.loadResponse.annotation,n=(t.timeDimensions||[]).filter(function(e){return!!e.granularity});return n.length?"time:".concat(n[0].granularity):t.dimensions.length?a.dimensions[t.dimensions[0]].type:void 0},Tt=function(e,t){return e?r.a.cloneElement(e,{resultSet:t}):null},It=Ce()("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.e30.Aq8wojcq2ooRV_gsylIqdnkMZQ579b72HBH1ovgoIiU",{apiUrl:"https://z58f1hioek.execute-api.us-east-1.amazonaws.com/production/cubejs-api/v1"}),kt={chartContainer:{minHeight:320}},xt={line:function(e){var t=e.resultSet;return r.a.createElement(Re.a,{width:"99%",height:320},r.a.createElement(Te.a,{data:He("x",t.chartPivot(),Je(t))},r.a.createElement(De.a,{dataKey:"x",minTickGap:20}),r.a.createElement(Me.a,null),r.a.createElement(qe.a,{strokeDasharray:"3 3"}),r.a.createElement(Fe.a,null),r.a.createElement(Be.a,null),We(t).map(function(e,a){return r.a.createElement(ke.a,{key:a,dataKey:e,name:Ke(t,e),stroke:Qe[a%Qe.length]})})))},table:st,pie:function(e){var t=e.resultSet;return r.a.createElement(ht,null,r.a.createElement(ut.a,null,r.a.createElement(mt.a,{isAnimationActive:!1,data:He("x",yt(t),bt(t,gt(t))),nameKey:"x",dataKey:wt(t),fill:"#8884d8"},t.chartPivot().map(function(e,t){return r.a.createElement(dt.a,{key:t,fill:Qe[t%Qe.length]})})),r.a.createElement(pt.a,null),r.a.createElement(Et.a,{formatter:Ye.number})))},bar:function(e){var t=e.resultSet,a=e.label,n=e.margin,l=e.shape;return r.a.createElement(ht,null,r.a.createElement(St.a,{margin:n,data:He("x",t.chartPivot(),jt(t))},r.a.createElement(Ct.a,{strokeDasharray:"3 3"}),r.a.createElement(Ot.a,{dataKey:"x",minTickGap:20}),r.a.createElement(Nt.a,null),r.a.createElement(Et.a,null),We(t).map(function(e,n){return r.a.createElement(Rt.a,{label:a,key:n,dataKey:e,shape:Tt(l,t),name:Ke(t,e),stackId:"a",fill:Qe[n%Qe.length]})}),r.a.createElement(pt.a,null)))}},Dt=function(){return r.a.createElement(ye.a,{container:!0,justify:"center"},r.a.createElement(ge.a,null))},At=function(e){var t=e.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye.a,{container:!0,justify:"center"},r.a.createElement(we.a,{color:"error",fontSize:"large"})),r.a.createElement(ye.a,{container:!0,justify:"center"},r.a.createElement(q.a,{align:"center",color:"error",variant:"body1"},t.message)))},Mt=function(e){var t=e.title,a=e.query,n=e.type,l=e.classes,i=e.options;return r.a.createElement(me.a,null,r.a.createElement(pe.a,{title:t}),r.a.createElement(ve.a,null,r.a.createElement("div",{className:l.chartContainer},r.a.createElement(Oe.QueryRenderer,{cubejsApi:It,query:a,render:function(e){var t=e.resultSet,a=e.loadingState,l=e.error;return t?function(e,t){var a=xt[e];return r.a.createElement(a,t)}(n,Object(y.a)({resultSet:t},i)):l?r.a.createElement(At,{error:l}):r.a.createElement(Dt,{loadingState:a})}}))))};Mt.defaultprops={title:null};var _t=Object(O.withStyles)(kt)(Mt),qt=a(375),Gt=function(e){var t=e.title;return r.a.createElement(qt.Helmet,null,r.a.createElement("title",null,t))},Ft=[ze()().subtract(14,"d").format("YYYY-MM-DD"),ze()().format("YYYY-MM-DD")],Vt=[{title:"Page Views last 14 days",type:"line",query:{measures:["Events.pageView"],timeDimensions:[{dimension:"Events.time",dateRange:Ft,granularity:"day"}]}},{title:"Top 5 Events",type:"pie",query:{measures:["Events.anyEvent"],dimensions:["Events.event"],limit:5}},{title:"Events list",type:"table",query:{measures:["Events.anyEvent","Events.anyEventUniq"],dimensions:["Events.event"]}},{title:"Page Views by Page",type:"bar",query:{measures:["Events.pageView"],dimensions:["Events.pageTitle"],timeDimensions:[{dimension:"Events.time",dateRange:Ft,granularity:"day"}]}}],Bt=Object(O.withStyles)(function(e){return{cardContainerStyles:{display:"grid",gridColumnGap:"24px",gridTemplateColumns:"1fr 1fr",rowGap:"24px"}}})(function(e){var t=e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Gt,{title:"Dashboard"}),r.a.createElement("div",{className:t.cardContainerStyles},Vt.map(function(e,t){return r.a.createElement(_t,Object.assign({},e,{key:t}))})))}),Lt=a(383),zt=a.n(Lt),Ut=a(169),Pt=a.n(Ut),Yt=a(83),Ht=a.n(Yt),Jt=a(61),Wt=a(376),Kt=a.n(Wt),Qt=a(245),Xt=a.n(Qt),Zt=a(377),$t=a.n(Zt),ea=[{value:"Events.anyEvent",label:"Any Event",default:!0},{value:"Events.pageView",label:"Page View"},{value:"Events.Navigation__Menu_Closed",label:"Navigation: Menu Closed"},{value:"Events.Navigation__Menu_Opened",label:"Navigation: Menu Opened"},{value:"Events.Reports__Event_Selected",label:"Reports: Event Selected"},{value:"Events.Reports__Property_Selected",label:"Reports: Property Selected"},{value:"Events.Reports__Date_Range_Changed",label:"Reports: Date Range Changed"},{value:"Events.Reports__Visualization_Changed",label:"Reports: Visualization Changed"}],ta=ea.find(function(e){return e.default}),aa=function(e,t){return"total"===t?e:"".concat(e,"Uniq")},na=function(e,t,a,n){n({type:"REMOVE_MEASURE",id:a}),n({type:"ADD_MEASURE",value:aa(e,t),id:a}),window.snowplow("trackStructEvent","Reports","Event Selected")},ra={container:function(e){return Object(y.a)({},e,{width:300})}},la=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(v.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={eventType:"total"},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.onChange,n=t.defaultValue,l=t.id,i=t.clearable,o=t.classes;return r.a.createElement("div",{className:o.container},r.a.createElement(Kt.a,{disableUnderline:!0,value:this.state.eventType,onChange:function(t){var n=t.target.value;if(n!==e.state.eventType){e.setState({eventType:t.target.value});var r=e.refs.select.state.value.value;na(r,n,l,a)}}},r.a.createElement(Xt.a,{value:"total"},"Total"),r.a.createElement(Xt.a,{value:"unique"},"Unique")),i&&r.a.createElement(B.a,{className:o.clearButton,onClick:function(){a({type:"REMOVE_MEASURE",id:l}),a({type:"REMOVE_EVENT_SELECT",id:l})},"aria-label":"Delete"},r.a.createElement($t.a,null)),r.a.createElement(Jt.a,{ref:"select",defaultValue:n,styles:ra,options:ea,onChange:function(t,n){return na(t.value,e.state.eventType,l,a)}}))}}]),t}(r.a.Component),ia=Object(O.withStyles)({container:{position:"relative"},clearButton:{position:"absolute",right:-10,top:-10}})(la),oa=[{label:"Event properties",options:[{value:"Events.pageTitle",label:"Page Title"},{value:"Events.referrer",label:"Referrer"}]},{label:"User properties",options:[{value:"Users.id",label:"User ID"},{value:"Users.lastSeen",label:"Last Seen"}]}],ca={container:function(e){return Object(y.a)({},e,{width:300})}},sa=function(e){var t=e.onChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Jt.a,{isClearable:!0,styles:ca,options:oa,onChange:function(e,a){return function(e,t,a){a({type:"REMOVE_DIMENSION"}),e&&(a({type:"ADD_DIMENSION",value:e.value}),window.snowplow("trackStructEvent","Reports","Property Selected"))}(e,0,t)}}))},ua=a(380),ma=a.n(ua),da=a(171),pa=a.n(da),Ea=a(381),va=a.n(Ea),ha=a(382),ga=a.n(ha),fa=Object(O.withStyles)({toggleContainer:{height:56,display:"flex",alignItems:"center",justifyContent:"flex-start"}})(function(e){var t=e.value,a=e.onChange,n=e.classes;return r.a.createElement("div",{className:n.toggleContainer},r.a.createElement(ma.a,{exclusive:!0,value:t,onChange:function(e,t){t&&(a({type:"CHANGE_VISUALIZATION_TYPE",value:t}),window.snowplow("trackStructEvent","Reports","Visualization Changed"))}},r.a.createElement(pa.a,{value:"line"},r.a.createElement(va.a,null)),r.a.createElement(pa.a,{value:"bar"},r.a.createElement(te.a,null)),r.a.createElement(pa.a,{value:"pie"},r.a.createElement(ga.a,null))))}),ya=[{value:"hour",label:"Hourly"},{value:"day",label:"Daily",default:!0},{value:"week",label:"Weekly"},{value:"month",label:"Montly"}],ba=ya.find(function(e){return e.default}),wa={container:function(e){return Object(y.a)({},e,{width:120})}},Sa=function(e){var t=e.defaultValue,a=e.onChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Jt.a,{defaultValue:t,styles:wa,options:ya,onChange:function(e,t){return a({type:"CHANGE_GRANULARITY",value:e.value})}}))},Ca=a(104),Oa=function(e,t){var a,n;return[(a=ze()()).subtract.apply(a,Object(Ca.a)(e)).format("YYYY-MM-DD"),(n=ze()()).subtract.apply(n,Object(Ca.a)(t)).format("YYYY-MM-DD")]},Na=[{value:Oa([0,"d"],[0,"d"]),label:"Current day"},{value:Oa([1,"d"],[1,"d"]),label:"Previous day"},{value:Oa([7,"d"],[0,"d"]),label:"Last 7 days"},{value:Oa([14,"d"],[0,"d"]),label:"Last 14 days",default:!0},{value:Oa([30,"d"],[0,"d"]),label:"Last 30 days"},{value:Oa([12,"months"],[0,"d"]),label:"Last 12 months"}],Ra=Na.find(function(e){return e.default}),ja={container:function(e){return Object(y.a)({},e,{width:200})}},Ta=function(e){var t=e.defaultValue,a=e.onChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Jt.a,{styles:ja,defaultValue:t,options:Na,onChange:function(e,t){a({type:"CHANGE_DATERANGE",value:e.value}),window.snowplow("trackStructEvent","Reports","Date Range Changed")}}))},Ia=function(e){var t=e.disabled;return r.a.createElement(Ht.a,{style:{zIndex:1203},variant:"contained",color:"primary",disabled:t,onClick:function(){window.snowplow("trackStructEvent","Reports","Save Button Clicked"),alert("Saving reports in demo mode is not available")}},"Save")},ka=function(){function e(t){Object(p.a)(this,e),this.data=t}return Object(E.a)(e,[{key:"change",value:function(e){var t=this.reducer(this.data,e);this.data=t}},{key:"reducer",value:function(e,t){switch(t.type){case"REMOVE_EVENT_SELECT":var a=e.eventSelects.filter(function(e){return e!==t.id});return Object(y.a)({},e,{eventSelects:a});case"ADD_EVENT_SELECT":var n=Object(Ca.a)(e.eventSelects);return n.push(function(e){return Math.max.apply(Math,Object(Ca.a)(e))+1}(n)),Object(y.a)({},e,{eventSelects:n});case"CHANGE_DATERANGE":return Object(y.a)({},e,{dateRange:t.value});case"CHANGE_GRANULARITY":return Object(y.a)({},e,{granularity:t.value});case"CHANGE_VISUALIZATION_TYPE":var r=function(e,t){return"pie"===e?{granularity:null,memorizedGranularity:t.granularity}:{granularity:t.granularity||t.memorizedGranularity,memorizedGranularity:null}}(t.value,e),l=r.granularity,i=r.memorizedGranularity;return Object(y.a)({},e,{granularity:l,memorizedGranularity:i,visualizationType:t.value});case"ADD_DIMENSION":return Object(y.a)({},e,{dimensions:[t.value]});case"REMOVE_DIMENSION":return Object(y.a)({},e,{dimensions:[]});case"ADD_MEASURE":var o=Object(y.a)({},e.measures);return o[t.id]=t.value,Object(y.a)({},e,{measures:o});case"REMOVE_MEASURE":var c=Object(y.a)({},e.measures);return delete c[t.id],Object(y.a)({},e,{measures:c});default:return e}}}]),e}(),xa=function(e,t){return function(a){function n(t){var a;return Object(p.a)(this,n),(a=Object(v.a)(this,Object(h.a)(n).call(this,t))).store=new ka(e),a}return Object(g.a)(n,a),Object(E.a)(n,[{key:"onChange",value:function(e){this.store.change(e),this.forceUpdate()}},{key:"render",value:function(){return r.a.createElement(t,Object.assign({},this.store.data,{onChange:this.onChange.bind(this)}))}}]),n}(n.Component)},Da=function(e){function t(){return Object(p.a)(this,t),Object(v.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.onChange,l=t.eventSelects,i=t.granularity,o=t.visualizationType;return r.a.createElement(ye.a,{container:!0,spacing:24},r.a.createElement(ye.a,{item:!0,xs:10},r.a.createElement(ye.a,{container:!0,alignItems:"flex-end",spacing:16},l.map(function(t){return r.a.createElement(ye.a,{key:t,item:!0},r.a.createElement(ia,{id:t,defaultValue:1===t&&ta,onChange:n,clearable:e.canRemoveEventsSelects}))}),this.canAddEventsSelects&&r.a.createElement(ye.a,{item:!0},r.a.createElement(zt.a,{onClick:function(){return n({type:"ADD_EVENT_SELECT"})},size:"small","aria-label":"Add",className:a.fab},r.a.createElement(Pt.a,null))))),r.a.createElement(ye.a,{item:!0,xs:2},r.a.createElement(ye.a,{container:!0,justify:"flex-end"},r.a.createElement(Ia,null))),r.a.createElement(ye.a,{item:!0,xs:12},r.a.createElement(Ht.a,{variant:"contained",color:"secondary",disabled:!0},"By"),r.a.createElement("div",{className:a.dimensionSelectContainer},r.a.createElement(sa,{onChange:n}))),r.a.createElement(ye.a,{item:!0,xs:12},r.a.createElement(ye.a,{container:!0,justify:"flex-end"},r.a.createElement(ye.a,{item:!0},r.a.createElement("div",{className:a.granularitySelectContainer},r.a.createElement(Ta,{onChange:n,defaultValue:Ra}))),r.a.createElement(ye.a,{item:!0},i&&r.a.createElement("div",{className:a.granularitySelectContainer},r.a.createElement(Sa,{defaultValue:ba,onChange:n}))),r.a.createElement(ye.a,{item:!0},r.a.createElement("div",null,r.a.createElement(fa,{value:o,onChange:n}))))),r.a.createElement(ye.a,{item:!0,xs:12},r.a.createElement(_t,this.query)))}},{key:"query",get:function(){return function(e){var t=e.dateRange,a=e.granularity,n=e.measures,r=e.dimensions;return{type:e.visualizationType,query:{measures:Object.values(n),dimensions:r,timeDimensions:[{dimension:"Events.time",dateRange:t,granularity:a}]}}}(this.props)}},{key:"canAddEventsSelects",get:function(){return this.props.eventSelects.length<3}},{key:"canRemoveEventsSelects",get:function(){return this.props.eventSelects.length>1}}]),t}(n.Component),Aa=xa({eventSelects:[1],measures:Object(f.a)({},1,ta.value),dimensions:[],dateRange:Ra.value,granularity:ba.value,visualizationType:"line"},Object(O.withStyles)({dimensionSelectContainer:{display:"inline-flex",marginLeft:"20px"},granularitySelectContainer:{paddingTop:10,marginRight:20}})(Da)),Ma=Object(O.withStyles)({root:{display:"flex",flexWrap:"wrap"},formControl:{minWidth:120}})(function(e){e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Gt,{title:"Reports"}),r.a.createElement(Aa,null))}),_a=a(384),qa=a(385),Ga=a.n(qa),Fa=a(160),Va=function(e,t,a,n){var r=t+(n-100),l=e+(a+5);return"M".concat(l,",").concat(r,"\n          L").concat(l+50," ").concat(r,"\n          L").concat(l+10+50," ").concat(r+13,"\n          L").concat(l+50," ").concat(r+26,"\n          L").concat(l," ").concat(r+26,"\n          Z")},Ba=function(e){var t=e.x,a=e.y,n=e.width,l=e.height,i=e.index,o=e.resultSet.chartPivot(),c=i!==o.length-1,s=null;c&&(s=Math.round(100*Object.values(o[i+1])[2]/Object.values(o[i])[2]));var u=a+(l-100),m=t+(n+5);return r.a.createElement("g",null,r.a.createElement(Fa.a,e),c&&[r.a.createElement("path",{d:Va(t,a,n,l),stroke:"none",fill:"#50556C"}),r.a.createElement("text",{x:m+25,y:u+15,fill:"#fff",textAnchor:"middle",dominantBaseline:"middle"},s,"%")])},La=function(e){var t=e.query;e.dateRange;return r.a.createElement(_t,{type:"bar",options:{label:{position:"top"},margin:{top:20},shape:r.a.createElement(Ba,null)},query:t})},za=Ce()("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.e30.Aq8wojcq2ooRV_gsylIqdnkMZQ579b72HBH1ovgoIiU",{apiUrl:"https://z58f1hioek.execute-api.us-east-1.amazonaws.com/production/cubejs-api/v1"}),Ua=function(e){var t=e.query,a=e.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.QueryRenderer,{query:t,cubejsApi:za,render:function(e){var t=e.resultSet;return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{variant:"h6"},"Completion Rate: ",function(e,t){var a=e.rawData(),n=Number(a[a.length-1]["".concat(t,".conversions")]);if(0===n)return 0;var r=Number(a[0]["".concat(t,".conversions")]);return Math.round(100*n/r)}(t,a),"%"),r.a.createElement(q.a,{variant:"subtitle1"},"30 days to complete funnel")):null}}))},Pa=[{value:"ReportsFunnel",label:"Reports"},{value:"FunnelsUsageFunnel",label:"Funnels Usage"},{value:"FunnelsEditFunnel",label:"Funnels Editing"}],Ya=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(v.a)(this,Object(h.a)(t).call(this,e))).state={funnelId:null,dateRange:Ra.value},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye.a,{container:!0,spacing:24},r.a.createElement(ye.a,{item:!0,xs:3},r.a.createElement(Jt.a,{options:Pa,placeholder:"Select a funnel",onChange:function(t){window.snowplow("trackStructEvent","Funnels","Funnel Selected"),e.setState({funnelId:t.value})}})),r.a.createElement(ye.a,{item:!0,xs:3},r.a.createElement(Ht.a,{className:t.button,variant:"contained",disabled:!this.state.funnelId,onClick:function(){window.snowplow("trackStructEvent","Funnels","Edit Button Clicked"),alert("Editing funnels in demo mode isn't available")}},r.a.createElement(Ga.a,{className:t.icon}),"Edit"),r.a.createElement(Ht.a,{variant:"contained",className:t.button,onClick:function(){window.snowplow("trackStructEvent","Funnels","New Button Clicked"),alert("Adding new funnels in demo mode isn't available")}},r.a.createElement(Pt.a,{className:t.icon}),"New")),this.state.funnelId&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ye.a,{item:!0,xs:12},r.a.createElement(ye.a,{container:!0},r.a.createElement(ye.a,{item:!0,xs:6},r.a.createElement(Ua,{query:this.query,id:this.state.funnelId})),r.a.createElement(ye.a,{item:!0,xs:6},r.a.createElement(ye.a,{container:!0,justify:"flex-end"},r.a.createElement(Ta,{onChange:function(t){var a=t.value;return e.setState({dateRange:a})},defaultValue:Ra}))))),r.a.createElement(ye.a,{item:!0,xs:12},r.a.createElement(La,{dateRange:this.state.dateRange,query:this.query})))))}},{key:"query",get:function(){return{measures:["".concat(this.state.funnelId,".conversions")],dimensions:["".concat(this.state.funnelId,".step")],timeDimensions:[{dimension:"".concat(this.state.funnelId,".time"),dateRange:this.state.dateRange}]}}}]),t}(n.Component),Ha=Object(O.withStyles)(function(e){return{button:{marginRight:e.spacing.unit,marginLeft:e.spacing.unit},icon:{marginRight:e.spacing.unit}}})(Ya),Ja=function(e){return Object(_a.a)(e),r.a.createElement(r.a.Fragment,null,r.a.createElement(Gt,{title:"Funnels"}),r.a.createElement(Ha,null))},Wa=a(246),Ka=a.n(Wa),Qa=(a(783),function(e){function t(){return Object(p.a)(this,t),Object(v.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){Ka.a.highlightAll()}},{key:"componentDidUpdate",value:function(){Ka.a.highlightAll()}},{key:"render",value:function(){return r.a.createElement("pre",null,r.a.createElement("code",{className:"language-javascript"},this.props.code))}}]),t}(r.a.Component)),Xa=a(387),Za=a.n(Xa),$a=a(386),en=a.n($a),tn=Object(O.withStyles)(function(e){return{cardContainerStyles:{fontSize:14,display:"grid",gridColumnGap:"24px",gridTemplateColumns:"[start] 50% [end] 50%",rowGap:"24px"},twoColumn:{gridColumnEnd:"span 2"},withBottomMargin:{marginBottom:20}}})(function(e){var t=e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Gt,{title:"About"}),r.a.createElement("div",{className:t.cardContainerStyles},r.a.createElement(me.a,null,r.a.createElement(pe.a,{title:"Architecture"}),r.a.createElement(Za.a,{component:"img",image:en.a})),r.a.createElement(me.a,null,r.a.createElement(pe.a,{title:"Installation"}),r.a.createElement(ve.a,null,r.a.createElement(q.a,{variant:"h6"},"Setup Snowplow Cloudfront Collector"),r.a.createElement(q.a,{variant:"body1",className:t.withBottomMargin},"You need to upload a tracking pixel to Amazon CloudFront CDN. The Snowplow Tracker sends data to the collector by making a GET request for the pixel and passing data as a query string parameter. The CloudFront Collector uses CloudFront logging to record the request (including the query string) to an S3 bucket."),r.a.createElement(q.a,{variant:"h6"},"Install Javascript Tracker"),r.a.createElement(q.a,{variant:"body1",className:t.withBottomMargin},"Snowplow Javascripot Tracker is similar to Google Analytics\u2019s tracking code or Mixpanel\u2019s, so you need to just embed it into your HTML page. See snippet example below."),r.a.createElement(q.a,{variant:"h6"},"Create Athena Table"),r.a.createElement(q.a,{variant:"body1",className:t.withBottomMargin},"Once you have the data, which is CloudFront logs, in the S3 bucket, you can query it with Athena. All you need to do is create a table for CloudFront logs. See SQL code below."),r.a.createElement(q.a,{variant:"h6"},"Setup Cube.js Schema"),r.a.createElement(q.a,{variant:"body1",className:t.withBottomMargin},"Cube.js uses Data Schema to generate and execute SQL. You can express all required transformation in the schema, it also could be generated dynamically. See code below for an example or ",r.a.createElement("a",{href:"https://cube.dev/docs/getting-started-cubejs-schema"},"learn more about it here")))),r.a.createElement(me.a,{className:t.twoColumn},r.a.createElement(pe.a,{title:"Tracking Code"}),r.a.createElement(ve.a,null,r.a.createElement(Qa,{code:'<script type="text/javascript">\n  ;(function(p,l,o,w,i,n,g){if(!p[i]){p.GlobalSnowplowNamespace=p.GlobalSnowplowNamespace||[];\n  p.GlobalSnowplowNamespace.push(i);p[i]=function(){(p[i].q=p[i].q||[]).push(arguments)\n  };p[i].q=p[i].q||[];n=l.createElement(o);g=l.getElementsByTagName(o)[0];n.async=1;\n  n.src=w;g.parentNode.insertBefore(n,g)}}(window,document,"script","//d1fc8wv8zag5ca.cloudfront.net/2.10.2/sp.js","snowplow"));\n\n  window.snowplow(\'newTracker\', \'cf\', \'%REACT_APP_CLOUD_FRONT_ID%.cloudfront.net\', { post: false });\n<\/script>\n'}))),r.a.createElement(me.a,null,r.a.createElement(pe.a,{title:"Create Athena table"}),r.a.createElement(ve.a,null,r.a.createElement(Qa,{code:"CREATE EXTERNAL TABLE IF NOT EXISTS default.cloudfront_logs (\n  `date` DATE,\n  time STRING,\n  location STRING,\n  bytes BIGINT,\n  requestip STRING,\n  method STRING,\n  host STRING,\n  uri STRING,\n  status INT,\n  referrer STRING,\n  useragent STRING,\n  querystring STRING,\n  cookie STRING,\n  resulttype STRING,\n  requestid STRING,\n  hostheader STRING,\n  requestprotocol STRING,\n  requestbytes BIGINT,\n  timetaken FLOAT,\n  xforwardedfor STRING,\n  sslprotocol STRING,\n  sslcipher STRING,\n  responseresulttype STRING,\n  httpversion STRING,\n  filestatus STRING,\n  encryptedfields INT\n)\nROW FORMAT DELIMITED\nFIELDS TERMINATED BY '\t'\nLOCATION 's3://CloudFront_bucket_name/AWSLogs/Account_ID/'\nTBLPROPERTIES ( 'skip.header.line.count'='2' )\n"}))),r.a.createElement(me.a,null,r.a.createElement(pe.a,{title:"Setup Cube.js Schema"}),r.a.createElement(ve.a,null,r.a.createElement(Qa,{code:"cube(`Events`, {\n  sql:\n    `SELECT\n      from_iso8601_timestamp(to_iso8601(date) || 'T' || \"time\") as time,\n      url_decode(url_decode(regexp_extract(querystring, 'e', 1))) as event,\n      url_decode(url_decode(regexp_extract(querystring, 'page', 1))) as page_title,\n    FROM cloudfront_logs\n    `,\n\n  measures: {\n    pageView: {\n      type: `count`,\n      filters: [\n        { sql: `${CUBE}.event = 'pv'` }\n      ]\n    },\n  },\n\n  dimensions: {\n    pageTitle: {\n      sql: `page_title`,\n      type: `string`\n    }\n  }\n});"}))),r.a.createElement(me.a,{className:t.twoColumn},r.a.createElement(pe.a,{title:"Visualize Results"}),r.a.createElement(ve.a,null,r.a.createElement("iframe",{src:"https://codesandbox.io/embed/pkj4pk0x1j?fontsize=12&hidenavigation=1",style:{width:"100%",height:1e3,border:0,borderRadius:"4px",overflow:"hidden"},sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin"})))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var an=u()({basename:"/cubejs/event-analytics"});an.listen(function(e,t){setTimeout(function(){window.snowplow("trackPageView")},0)}),i.a.render(r.a.createElement(o.a,{history:an},r.a.createElement(c.a,null,r.a.createElement(se,{exact:!0,path:"/",title:"Dashboard",component:Bt}),r.a.createElement(se,{path:"/reports",title:"Reports",component:Ma}),r.a.createElement(se,{path:"/funnels",title:"Funnels",component:Ja}),r.a.createElement(se,{path:"/about",title:"About",component:tn}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[390,2,1]]]);
//# sourceMappingURL=main.c2ec2f0b.chunk.js.map
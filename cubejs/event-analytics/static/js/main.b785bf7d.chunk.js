(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{389:function(e,t,a){e.exports=a(783)},783:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(34),i=a.n(l),c=a(790),o=a(791),s=a(347),u=a.n(s),m=a(388),d=a(792),E=a(52),p=a(53),v=a(58),f=a(57),h=a(59),g=a(98),y=a(28),b=a(5),w=a.n(b),S=a(348),C=a.n(S),O=a(29),j=a(353),R=a.n(j),k=a(357),D=a.n(k),N=a(354),x=a.n(N),M=a(355),I=a.n(M),A=a(228),_=a.n(A),V=a(66),T=a.n(V),q=a(359),F=a.n(q),U=a(119),G=a.n(U),z=a(356),B=a.n(z),P=a(358),L=a.n(P),Y=a(785),H=a(100),J=a.n(H),K=a(125),W=a.n(K),Z=a(126),Q=a.n(Z),X=a(350),$=a.n(X),ee=a(157),te=a.n(ee),ae=a(351),ne=a.n(ae),re=a(352),le=a.n(re),ie=Object(O.withStyles)(function(e){return{link:{textDecoration:"none"}}})(function(e){var t=e.classes;return r.a.createElement("div",null,r.a.createElement(Y.a,{to:"/",className:t.link},r.a.createElement(J.a,{button:!0},r.a.createElement(W.a,null,r.a.createElement($.a,null)),r.a.createElement(Q.a,{primary:"Dashboard"}))),r.a.createElement(Y.a,{to:"/reports",className:t.link},r.a.createElement(J.a,{button:!0},r.a.createElement(W.a,null,r.a.createElement(te.a,null)),r.a.createElement(Q.a,{primary:"Reports"}))),r.a.createElement(Y.a,{to:"/funnels",className:t.link},r.a.createElement(J.a,{button:!0},r.a.createElement(W.a,null,r.a.createElement(ne.a,null)),r.a.createElement(Q.a,{primary:"Funnels"}))),r.a.createElement(Y.a,{to:"/about",className:t.link},r.a.createElement(J.a,{button:!0},r.a.createElement(W.a,null,r.a.createElement(le.a,null)),r.a.createElement(Q.a,{primary:"About"}))))}),ce=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(v.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleDrawerOpen=function(){window.snowplow("trackStructEvent","Navigation","Menu Opened"),a.setState({open:!0})},a.handleDrawerClose=function(){window.snowplow("trackStructEvent","Navigation","Menu Closed"),a.setState({open:!1})},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.title,n=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:t.root},r.a.createElement(R.a,null),r.a.createElement(x.a,{position:"absolute",className:w()(t.appBar,this.state.open&&t.appBarShift)},r.a.createElement(I.a,{disableGutters:!this.state.open,className:t.toolbar},r.a.createElement(G.a,{color:"inherit","aria-label":"Open drawer",onClick:this.handleDrawerOpen,className:w()(t.menuButton,this.state.open&&t.menuButtonHidden)},r.a.createElement(B.a,null)),r.a.createElement(T.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},a))),r.a.createElement(D.a,{variant:"permanent",classes:{paper:w()(t.drawerPaper,!this.state.open&&t.drawerPaperClose)},open:this.state.open},r.a.createElement("div",{className:t.toolbarIcon},r.a.createElement(G.a,{onClick:this.handleDrawerClose},r.a.createElement(L.a,null))),r.a.createElement(F.a,null),r.a.createElement(_.a,null,r.a.createElement(ie,null))),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),n)),r.a.createElement(C.a,{svgStyle:{zIndex:1202},size:120,href:"https://github.com/statsbotco/cubejs-client/tree/master/examples/event-analytics"}))}}]),t}(r.a.Component);ce.defaultProps={title:null};var oe=Object(O.withStyles)(function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(y.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(g.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:7*e.spacing.unit},e.breakpoints.up("sm"),{width:9*e.spacing.unit}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,padding:3*e.spacing.unit,height:"100vh",overflow:"auto"},h5:{marginBottom:2*e.spacing.unit}}})(ce),se=function(e){var t=e.title,a=Object(m.a)(e,["title"]);return r.a.createElement(oe,{title:t},r.a.createElement(d.a,a))},ue=a(165),me=a.n(ue),de=a(166),Ee=a.n(de),pe=a(374),ve=a.n(pe),fe=a(372),he=a.n(fe),ge=a(20),ye=a.n(ge),be=a(373),we=a.n(be),Se=a(159),Ce=a.n(Se),Oe=a(160),je=a(362),Re=a.n(je),ke=a(363),De=a.n(ke),Ne=a(238),xe=a.n(Ne),Me=a(240),Ie=a.n(Me),Ae=a(241),_e=a.n(Ae),Ve=a(366),Te=a.n(Ve),qe=a(232),Fe=a.n(qe),Ue=a(156),Ge=a.n(Ue),ze=a(38),Be=a.n(ze),Pe=a(361),Le=a.n(Pe),Ye={"time:null":function(e){return Be()(e).format("MMM DD")},"time:month":function(e){return Be()(e).format("MMM DD")},"time:week":function(e){return Be()(e).format("MMM DD")},"time:day":function(e){return Be()(e).format("MMM DD")},"time:hour":function(e){return Be()(e).format("MMM DD, HH:mm")},number:function(e){return Le()(e).format("0,0")},undefined:function(e){return e},string:function(e){return e}},He=function(e,t,a){return t.map(function(t){return t[e]=Ye[a](t[e]),t})},Je=function(e){return"time:".concat(e.query().timeDimensions[0].granularity)},Ke=function(e){return Object.keys(e.chartPivot()[0]).filter(function(e){return!["category","x"].includes(e)})},We=function(e,t){var a=e.loadResponse.annotation.measures[t]||e.loadResponse.annotation.dimensions[t];return a&&a.shortTitle?a.shortTitle:1===e.query().measures.length&&t.split(",").length>1?t.split(",")[0]:t},Ze=["#7DB3FF","#49457B","#FF7C78","#FED3D0","#6F76D9","#9ADFB4","#2E7987"],Qe=a(367),Xe=a.n(Qe),$e=a(369),et=a.n($e),tt=a(102),at=a.n(tt),nt=a(368),rt=a.n(nt),lt=a(242),it=a.n(lt),ct=a(95),ot=a.n(ct);var st=Object(O.withStyles)({root:{width:"100%",overflowX:"auto"}})(function(e){var t=e.classes,a=e.resultSet;return r.a.createElement(ot.a,{className:t.root},r.a.createElement(Xe.a,{className:t.table},r.a.createElement(rt.a,null,r.a.createElement(it.a,null,r.a.createElement(at.a,null,"Event"),r.a.createElement(at.a,{align:"right"},"Count"),r.a.createElement(at.a,{align:"right"},"Uniq Count"))),r.a.createElement(et.a,null,a.pivot().map(function(e,t){return r.a.createElement(it.a,{key:t},e.xValues.map(function(e,t){return r.a.createElement(at.a,{key:t,component:"th"}," ",e," ")}),e.yValuesArray.map(function(e,t){return r.a.createElement(at.a,{key:t,align:"right"},e[1])}))}))))}),ut=a(789),mt=a(738),dt=a(338),Et=a(346),pt=a(784),vt=a(786),ft=function(e){var t=e.children;return r.a.createElement(vt.a,{width:"99%",height:320},t)},ht=function(e){return e.query().dimensions[0]},gt=function(e){return e.query().dimensions.length>0},yt=function(e){return gt(e)?e.chartPivot({x:[ht(e)],y:["measures"],fillMissingDates:!1}):e.chartPivot({x:["measures"],y:[]})},bt=function(e,t){if(gt(e))return e.loadResponse.annotation.dimensions[t].type},wt=function(e){return gt(e)?Object.keys(e.loadResponse.annotation.measures)[0]:""},St=a(787),Ct=a(788),Ot=a(740),jt=a(741),Rt=a(739),kt=function(e){var t=e.loadResponse.query,a=e.loadResponse.annotation,n=(t.timeDimensions||[]).filter(function(e){return!!e.granularity});return n.length?"time:".concat(n[0].granularity):t.dimensions.length?a.dimensions[t.dimensions[0]].type:void 0},Dt=function(e,t){return e?r.a.cloneElement(e,{resultSet:t}):null},Nt=Ce()("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.e30.Aq8wojcq2ooRV_gsylIqdnkMZQ579b72HBH1ovgoIiU",{apiUrl:"https://z58f1hioek.execute-api.us-east-1.amazonaws.com/production/cubejs-api/v1"}),xt={chartContainer:{minHeight:320}},Mt={line:function(e){var t=e.resultSet;return r.a.createElement(Re.a,{width:"99%",height:320},r.a.createElement(De.a,{data:He("x",t.chartPivot(),Je(t))},r.a.createElement(Ie.a,{dataKey:"x",minTickGap:20}),r.a.createElement(_e.a,null),r.a.createElement(Te.a,{strokeDasharray:"3 3"}),r.a.createElement(Fe.a,null),r.a.createElement(Ge.a,null),Ke(t).map(function(e,a){return r.a.createElement(xe.a,{key:a,dataKey:e,name:We(t,e),stroke:Ze[a%Ze.length]})})))},table:st,pie:function(e){var t=e.resultSet;return r.a.createElement(ft,null,r.a.createElement(ut.a,null,r.a.createElement(mt.a,{isAnimationActive:!1,data:He("x",yt(t),bt(t,ht(t))),nameKey:"x",dataKey:wt(t),fill:"#8884d8"},t.chartPivot().map(function(e,t){return r.a.createElement(dt.a,{key:t,fill:Ze[t%Ze.length]})})),r.a.createElement(Et.a,null),r.a.createElement(pt.a,{formatter:Ye.number})))},bar:function(e){var t=e.resultSet,a=e.label,n=e.margin,l=e.shape;return r.a.createElement(ft,null,r.a.createElement(St.a,{margin:n,data:He("x",t.chartPivot(),kt(t))},r.a.createElement(Ct.a,{strokeDasharray:"3 3"}),r.a.createElement(Ot.a,{dataKey:"x",minTickGap:20}),r.a.createElement(jt.a,null),r.a.createElement(pt.a,null),Ke(t).map(function(e,n){return r.a.createElement(Rt.a,{label:a,key:n,dataKey:e,shape:Dt(l,t),name:We(t,e),stackId:"a",fill:Ze[n%Ze.length]})}),r.a.createElement(Et.a,null)))}},It=function(){return r.a.createElement(ye.a,{container:!0,justify:"center"},r.a.createElement(he.a,null))},At=function(e){var t=e.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye.a,{container:!0,justify:"center"},r.a.createElement(we.a,{color:"error",fontSize:"large"})),r.a.createElement(ye.a,{container:!0,justify:"center"},r.a.createElement(T.a,{align:"center",color:"error",variant:"body1"},t.message)))},_t=function(e){var t=e.title,a=e.query,n=e.type,l=e.classes,i=e.options;return r.a.createElement(me.a,null,r.a.createElement(Ee.a,{title:t}),r.a.createElement(ve.a,null,r.a.createElement("div",{className:l.chartContainer},r.a.createElement(Oe.QueryRenderer,{cubejsApi:Nt,query:a,render:function(e){var t=e.resultSet,a=e.loadingState,l=e.error;return t?function(e,t){var a=Mt[e];return r.a.createElement(a,t)}(n,Object(y.a)({resultSet:t},i)):l?r.a.createElement(At,{error:l}):r.a.createElement(It,{loadingState:a})}}))))};_t.defaultprops={title:null};var Vt=Object(O.withStyles)(xt)(_t),Tt=a(375),qt=function(e){var t=e.title;return r.a.createElement(Tt.Helmet,null,r.a.createElement("title",null,t))},Ft=[Be()().subtract(14,"d").format("YYYY-MM-DD"),Be()().format("YYYY-MM-DD")],Ut=[{title:"Page Views last 14 days",type:"line",query:{measures:["Events.pageView"],timeDimensions:[{dimension:"Events.time",dateRange:Ft,granularity:"day"}]}},{title:"Top 5 Events",type:"pie",query:{measures:["Events.anyEvent"],dimensions:["Events.event"],limit:5}},{title:"Events list",type:"table",query:{measures:["Events.anyEvent","Events.anyEventUniq"],dimensions:["Events.event"]}},{title:"Page Views by Page",type:"bar",query:{measures:["Events.pageView"],dimensions:["Events.pageTitle"],timeDimensions:[{dimension:"Events.time",dateRange:Ft,granularity:"day"}]}}],Gt=Object(O.withStyles)(function(e){return{cardContainerStyles:{display:"grid",gridColumnGap:"24px",gridTemplateColumns:"1fr 1fr",rowGap:"24px"}}})(function(e){var t=e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(qt,{title:"Dashboard"}),r.a.createElement("div",{className:t.cardContainerStyles},Ut.map(function(e,t){return r.a.createElement(Vt,Object.assign({},e,{key:t}))})))}),zt=a(383),Bt=a.n(zt),Pt=a(167),Lt=a.n(Pt),Yt=a(80),Ht=a.n(Yt),Jt=a(60),Kt=a(376),Wt=a.n(Kt),Zt=a(243),Qt=a.n(Zt),Xt=a(377),$t=a.n(Xt),ea=[{value:"Events.anyEvent",label:"Any Event",default:!0},{value:"Events.pageView",label:"Page View"},{value:"Events.Navigation__Menu_Closed",label:"Navigation: Menu Closed"},{value:"Events.Navigation__Menu_Opened",label:"Navigation: Menu Opened"},{value:"Events.Reports__Event_Selected",label:"Reports: Event Selected"},{value:"Events.Reports__Property_Selected",label:"Reports: Property Selected"},{value:"Events.Reports__Date_Range_Changed",label:"Reports: Date Range Changed"},{value:"Events.Reports__Visualization_Changed",label:"Reports: Visualization Changed"}],ta=ea.find(function(e){return e.default}),aa=function(e,t){return"total"===t?e:"".concat(e,"Uniq")},na=function(e,t,a,n){n({type:"REMOVE_MEASURE",id:a}),n({type:"ADD_MEASURE",value:aa(e,t),id:a}),window.snowplow("trackStructEvent","Reports","Event Selected")},ra={container:function(e){return Object(y.a)({},e,{width:300})}},la=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(v.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={eventType:"total"},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.onChange,n=t.defaultValue,l=t.id,i=t.clearable,c=t.classes;return r.a.createElement("div",{className:c.container},r.a.createElement(Wt.a,{disableUnderline:!0,value:this.state.eventType,onChange:function(t){var n=t.target.value;if(n!==e.state.eventType){e.setState({eventType:t.target.value});var r=e.refs.select.state.value.value;na(r,n,l,a)}}},r.a.createElement(Qt.a,{value:"total"},"Total"),r.a.createElement(Qt.a,{value:"unique"},"Unique")),i&&r.a.createElement(G.a,{className:c.clearButton,onClick:function(){a({type:"REMOVE_MEASURE",id:l}),a({type:"REMOVE_EVENT_SELECT",id:l})},"aria-label":"Delete"},r.a.createElement($t.a,null)),r.a.createElement(Jt.a,{ref:"select",defaultValue:n,styles:ra,options:ea,onChange:function(t,n){return na(t.value,e.state.eventType,l,a)}}))}}]),t}(r.a.Component),ia=Object(O.withStyles)({container:{position:"relative"},clearButton:{position:"absolute",right:-10,top:-10}})(la),ca=[{label:"Event properties",options:[{value:"Events.pageTitle",label:"Page Title"},{value:"Events.referrer",label:"Referrer"}]},{label:"User properties",options:[{value:"Users.id",label:"User ID"},{value:"Users.lastSeen",label:"Last Seen"}]}],oa={container:function(e){return Object(y.a)({},e,{width:300})}},sa=function(e){var t=e.onChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Jt.a,{isClearable:!0,styles:oa,options:ca,onChange:function(e,a){return function(e,t,a){a({type:"REMOVE_DIMENSION"}),e&&(a({type:"ADD_DIMENSION",value:e.value}),window.snowplow("trackStructEvent","Reports","Property Selected"))}(e,0,t)}}))},ua=a(380),ma=a.n(ua),da=a(170),Ea=a.n(da),pa=a(381),va=a.n(pa),fa=a(382),ha=a.n(fa),ga=Object(O.withStyles)({toggleContainer:{height:56,display:"flex",alignItems:"center",justifyContent:"flex-start"}})(function(e){var t=e.value,a=e.onChange,n=e.classes;return r.a.createElement("div",{className:n.toggleContainer},r.a.createElement(ma.a,{exclusive:!0,value:t,onChange:function(e,t){t&&(a({type:"CHANGE_VISUALIZATION_TYPE",value:t}),window.snowplow("trackStructEvent","Reports","Visualization Changed"))}},r.a.createElement(Ea.a,{value:"line"},r.a.createElement(va.a,null)),r.a.createElement(Ea.a,{value:"bar"},r.a.createElement(te.a,null)),r.a.createElement(Ea.a,{value:"pie"},r.a.createElement(ha.a,null))))}),ya=[{value:"hour",label:"Hourly"},{value:"day",label:"Daily",default:!0},{value:"week",label:"Weekly"},{value:"month",label:"Montly"}],ba=ya.find(function(e){return e.default}),wa={container:function(e){return Object(y.a)({},e,{width:120})}},Sa=function(e){var t=e.defaultValue,a=e.onChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Jt.a,{defaultValue:t,styles:wa,options:ya,onChange:function(e,t){return a({type:"CHANGE_GRANULARITY",value:e.value})}}))},Ca=a(101),Oa=function(e,t){var a,n;return[(a=Be()()).subtract.apply(a,Object(Ca.a)(e)).format("YYYY-MM-DD"),(n=Be()()).subtract.apply(n,Object(Ca.a)(t)).format("YYYY-MM-DD")]},ja=[{value:Oa([0,"d"],[0,"d"]),label:"Current day"},{value:Oa([1,"d"],[1,"d"]),label:"Previous day"},{value:Oa([7,"d"],[0,"d"]),label:"Last 7 days"},{value:Oa([14,"d"],[0,"d"]),label:"Last 14 days",default:!0},{value:Oa([30,"d"],[0,"d"]),label:"Last 30 days"},{value:Oa([12,"months"],[0,"d"]),label:"Last 12 months"}],Ra=ja.find(function(e){return e.default}),ka={container:function(e){return Object(y.a)({},e,{width:200})}},Da=function(e){var t=e.defaultValue,a=e.onChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Jt.a,{styles:ka,defaultValue:t,options:ja,onChange:function(e,t){a({type:"CHANGE_DATERANGE",value:e.value}),window.snowplow("trackStructEvent","Reports","Date Range Changed")}}))},Na=function(e){var t=e.disabled;return r.a.createElement(Ht.a,{style:{zIndex:1203},variant:"contained",color:"primary",disabled:t,onClick:function(){window.snowplow("trackStructEvent","Reports","Save Button Clicked"),alert("Saving reports in demo mode is not available")}},"Save")},xa=function(){function e(t){Object(E.a)(this,e),this.data=t}return Object(p.a)(e,[{key:"change",value:function(e){var t=this.reducer(this.data,e);this.data=t}},{key:"reducer",value:function(e,t){switch(t.type){case"REMOVE_EVENT_SELECT":var a=e.eventSelects.filter(function(e){return e!==t.id});return Object(y.a)({},e,{eventSelects:a});case"ADD_EVENT_SELECT":var n=Object(Ca.a)(e.eventSelects);return n.push(function(e){return Math.max.apply(Math,Object(Ca.a)(e))+1}(n)),Object(y.a)({},e,{eventSelects:n});case"CHANGE_DATERANGE":return Object(y.a)({},e,{dateRange:t.value});case"CHANGE_GRANULARITY":return Object(y.a)({},e,{granularity:t.value});case"CHANGE_VISUALIZATION_TYPE":var r=function(e,t){return"pie"===e?{granularity:null,memorizedGranularity:t.granularity}:{granularity:t.granularity||t.memorizedGranularity,memorizedGranularity:null}}(t.value,e),l=r.granularity,i=r.memorizedGranularity;return Object(y.a)({},e,{granularity:l,memorizedGranularity:i,visualizationType:t.value});case"ADD_DIMENSION":return Object(y.a)({},e,{dimensions:[t.value]});case"REMOVE_DIMENSION":return Object(y.a)({},e,{dimensions:[]});case"ADD_MEASURE":var c=Object(y.a)({},e.measures);return c[t.id]=t.value,Object(y.a)({},e,{measures:c});case"REMOVE_MEASURE":var o=Object(y.a)({},e.measures);return delete o[t.id],Object(y.a)({},e,{measures:o});default:return e}}}]),e}(),Ma=function(e,t){return function(a){function n(t){var a;return Object(E.a)(this,n),(a=Object(v.a)(this,Object(f.a)(n).call(this,t))).store=new xa(e),a}return Object(h.a)(n,a),Object(p.a)(n,[{key:"onChange",value:function(e){this.store.change(e),this.forceUpdate()}},{key:"render",value:function(){return r.a.createElement(t,Object.assign({},this.store.data,{onChange:this.onChange.bind(this)}))}}]),n}(n.Component)},Ia=function(e){function t(){return Object(E.a)(this,t),Object(v.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.onChange,l=t.eventSelects,i=t.granularity,c=t.visualizationType;return r.a.createElement(ye.a,{container:!0,spacing:24},r.a.createElement(ye.a,{item:!0,xs:10},r.a.createElement(ye.a,{container:!0,alignItems:"flex-end",spacing:16},l.map(function(t){return r.a.createElement(ye.a,{key:t,item:!0},r.a.createElement(ia,{id:t,defaultValue:1===t&&ta,onChange:n,clearable:e.canRemoveEventsSelects}))}),this.canAddEventsSelects&&r.a.createElement(ye.a,{item:!0},r.a.createElement(Bt.a,{onClick:function(){return n({type:"ADD_EVENT_SELECT"})},size:"small","aria-label":"Add",className:a.fab},r.a.createElement(Lt.a,null))))),r.a.createElement(ye.a,{item:!0,xs:2},r.a.createElement(ye.a,{container:!0,justify:"flex-end"},r.a.createElement(Na,null))),r.a.createElement(ye.a,{item:!0,xs:12},r.a.createElement(Ht.a,{variant:"contained",color:"secondary",disabled:!0},"By"),r.a.createElement("div",{className:a.dimensionSelectContainer},r.a.createElement(sa,{onChange:n}))),r.a.createElement(ye.a,{item:!0,xs:12},r.a.createElement(ye.a,{container:!0,justify:"flex-end"},r.a.createElement(ye.a,{item:!0},r.a.createElement("div",{className:a.granularitySelectContainer},r.a.createElement(Da,{onChange:n,defaultValue:Ra}))),r.a.createElement(ye.a,{item:!0},i&&r.a.createElement("div",{className:a.granularitySelectContainer},r.a.createElement(Sa,{defaultValue:ba,onChange:n}))),r.a.createElement(ye.a,{item:!0},r.a.createElement("div",null,r.a.createElement(ga,{value:c,onChange:n}))))),r.a.createElement(ye.a,{item:!0,xs:12},r.a.createElement(Vt,this.query)))}},{key:"query",get:function(){return function(e){var t=e.dateRange,a=e.granularity,n=e.measures,r=e.dimensions;return{type:e.visualizationType,query:{measures:Object.values(n),dimensions:r,timeDimensions:[{dimension:"Events.time",dateRange:t,granularity:a}]}}}(this.props)}},{key:"canAddEventsSelects",get:function(){return this.props.eventSelects.length<3}},{key:"canRemoveEventsSelects",get:function(){return this.props.eventSelects.length>1}}]),t}(n.Component),Aa=Ma({eventSelects:[1],measures:Object(g.a)({},1,ta.value),dimensions:[],dateRange:Ra.value,granularity:ba.value,visualizationType:"line"},Object(O.withStyles)({dimensionSelectContainer:{display:"inline-flex",marginLeft:"20px"},granularitySelectContainer:{paddingTop:10,marginRight:20}})(Ia)),_a=Object(O.withStyles)({root:{display:"flex",flexWrap:"wrap"},formControl:{minWidth:120}})(function(e){e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(qt,{title:"Reports"}),r.a.createElement(Aa,null))}),Va=a(384),Ta=a(385),qa=a.n(Ta),Fa=a(223),Ua=function(e,t,a,n){var r=t+(n-100),l=e+(a+5);return"M".concat(l,",").concat(r,"\n          L").concat(l+50," ").concat(r,"\n          L").concat(l+10+50," ").concat(r+13,"\n          L").concat(l+50," ").concat(r+26,"\n          L").concat(l," ").concat(r+26,"\n          Z")},Ga=function(e){var t=e.x,a=e.y,n=e.width,l=e.height,i=e.index,c=e.resultSet.chartPivot(),o=i!==c.length-1,s=null;o&&(s=Math.round(100*Object.values(c[i+1])[2]/Object.values(c[i])[2]));var u=a+(l-100),m=t+(n+5);return r.a.createElement("g",null,r.a.createElement(Fa.a,e),o&&[r.a.createElement("path",{d:Ua(t,a,n,l),stroke:"none",fill:"#50556C"}),r.a.createElement("text",{x:m+25,y:u+15,fill:"#fff",textAnchor:"middle",dominantBaseline:"middle"},s,"%")])},za=function(e){var t=e.query;e.dateRange;return r.a.createElement(Vt,{type:"bar",options:{label:{position:"top"},margin:{top:20},shape:r.a.createElement(Ga,null)},query:t})},Ba=Ce()("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.e30.Aq8wojcq2ooRV_gsylIqdnkMZQ579b72HBH1ovgoIiU",{apiUrl:"https://z58f1hioek.execute-api.us-east-1.amazonaws.com/production/cubejs-api/v1"}),Pa=function(e){var t=e.query,a=e.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.QueryRenderer,{query:t,cubejsApi:Ba,render:function(e){var t=e.resultSet;return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{variant:"h6"},"Completion Rate: ",function(e,t){var a=e.rawData(),n=Number(a[a.length-1]["".concat(t,".conversions")]);if(0===n)return 0;var r=Number(a[0]["".concat(t,".conversions")]);return Math.round(100*n/r)}(t,a),"%"),r.a.createElement(T.a,{variant:"subtitle1"},"30 days to complete funnel")):null}}))},La=[{value:"ReportsFunnel",label:"Reports"},{value:"FunnelsUsageFunnel",label:"Funnels Usage"},{value:"FunnelsEditFunnel",label:"Funnels Editing"}],Ya=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(v.a)(this,Object(f.a)(t).call(this,e))).state={funnelId:null,dateRange:Ra.value},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye.a,{container:!0,spacing:24},r.a.createElement(ye.a,{item:!0,xs:3},r.a.createElement(Jt.a,{options:La,placeholder:"Select a funnel",onChange:function(t){window.snowplow("trackStructEvent","Funnels","Funnel Selected"),e.setState({funnelId:t.value})}})),r.a.createElement(ye.a,{item:!0,xs:3},r.a.createElement(Ht.a,{className:t.button,variant:"contained",disabled:!this.state.funnelId,onClick:function(){window.snowplow("trackStructEvent","Funnels","Edit Button Clicked"),alert("Editing funnels in demo mode isn't available")}},r.a.createElement(qa.a,{className:t.icon}),"Edit"),r.a.createElement(Ht.a,{variant:"contained",className:t.button,onClick:function(){window.snowplow("trackStructEvent","Funnels","New Button Clicked"),alert("Adding new funnels in demo mode isn't available")}},r.a.createElement(Lt.a,{className:t.icon}),"New")),this.state.funnelId&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ye.a,{item:!0,xs:12},r.a.createElement(ye.a,{container:!0},r.a.createElement(ye.a,{item:!0,xs:6},r.a.createElement(Pa,{query:this.query,id:this.state.funnelId})),r.a.createElement(ye.a,{item:!0,xs:6},r.a.createElement(ye.a,{container:!0,justify:"flex-end"},r.a.createElement(Da,{onChange:function(t){var a=t.value;return e.setState({dateRange:a})},defaultValue:Ra}))))),r.a.createElement(ye.a,{item:!0,xs:12},r.a.createElement(za,{dateRange:this.state.dateRange,query:this.query})))))}},{key:"query",get:function(){return{measures:["".concat(this.state.funnelId,".conversions")],dimensions:["".concat(this.state.funnelId,".step")],timeDimensions:[{dimension:"".concat(this.state.funnelId,".time"),dateRange:this.state.dateRange}]}}}]),t}(n.Component),Ha=Object(O.withStyles)(function(e){return{button:{marginRight:e.spacing.unit,marginLeft:e.spacing.unit},icon:{marginRight:e.spacing.unit}}})(Ya),Ja=function(e){return Object(Va.a)(e),r.a.createElement(r.a.Fragment,null,r.a.createElement(qt,{title:"Funnels"}),r.a.createElement(Ha,null))},Ka=a(386),Wa=a.n(Ka),Za=Object(O.withStyles)(function(e){return{cardContainerStyles:{display:"grid",gridColumnGap:"24px",gridTemplateColumns:"1fr 1fr",rowGap:"24px"}}})(function(e){var t=e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(qt,{title:"About"}),r.a.createElement("div",{className:t.cardContainerStyles},r.a.createElement(me.a,null,r.a.createElement(Ee.a,{title:"Architecture"}),r.a.createElement(Wa.a,{component:"img",image:"./schema.png"}))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Qa=u()();Qa.listen(function(e,t){setTimeout(function(){window.snowplow("trackPageView")},0)}),i.a.render(r.a.createElement(c.a,{history:Qa,basename:"/cubejs/event-analytics"},r.a.createElement(o.a,null,r.a.createElement(se,{exact:!0,path:"/",title:"Dashboard",component:Gt}),r.a.createElement(se,{path:"/reports",title:"Reports",component:_a}),r.a.createElement(se,{path:"/funnels",title:"Funnels",component:Ja}),r.a.createElement(se,{path:"/about",title:"About",component:Za}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[389,2,1]]]);
//# sourceMappingURL=main.b785bf7d.chunk.js.map